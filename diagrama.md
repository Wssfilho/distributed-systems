# ðŸ“Š Sequence Diagrams - Bully Algorithm

## ðŸŽ¬ Scenario 1: Simple Election (P3 crashes, P1 detects, 5 processes)

```
P1          P2          P3          P4          P5
â”‚           â”‚           â”‚           â”‚           â”‚
â”‚ (all start without a coordinator)â”‚           â”‚
â”‚           â”‚           â”‚           â”‚           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ t=0s
â”‚           â”‚           â”‚           â”‚           â”‚
â”‚           â”‚           âš ï¸          â”‚           â”‚ t=2s (P3 cai)
â”‚           â”‚         OFFLINE       â”‚           â”‚
â”‚           â”‚           â”‚           â”‚           â”‚
ðŸ” detects  â”‚           â”‚           â”‚           â”‚ t=2.5s
â”‚           â”‚           â”‚           â”‚           â”‚
â”‚â”€â”€ELECTIONâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> (to P2-P5)
â”‚           â”‚           â”‚           â”‚           â”‚
â”‚<â”€â”€â”€â”€â”€OKâ”€â”€â”€â”‚           â”‚           â”‚           â”‚
â”‚           â”‚â”€â”€ELECTIONâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> (P2 to P3-P5)
â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€OKâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚           â”‚
â”‚           â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€OKâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚           â”‚
â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€OKâ”€â”€â”€â”‚
â”‚           â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€OKâ”€â”€â”€â”‚
â”‚           â”‚           â”‚           â”‚â”€â”€ELECTIONâ”€>
â”‚           â”‚           â”‚           â”‚<â”€â”€â”€â”€OKâ”€â”€â”€â”€â”‚
â”‚           â”‚           â”‚           â”‚           ðŸ‘‘ (P5 = highest)
â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€COORDINATORâ”€â”€â”€â”‚
â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€COORDINATORâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚           â”‚           â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€COORDINATORâ”€â”€â”‚
â”‚           â”‚           â”‚           â”‚<COORDINATORâ”‚
â”‚           â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€COORDINATORâ”€â”€â”‚
â”‚           â”‚           â”‚           â”‚           â”‚
âœ… P5=coord âœ… P5=coord  âš ï¸        âœ… P5=coord âœ… Leader
```

## ðŸ”„ Scenario 2: Process Returns (continuation)

```
P1          P2          P3          P4          P5
â”‚           â”‚           â”‚           â”‚           â”‚
â”‚ (P5 is coordinator)    â”‚           â”‚         ðŸ‘‘â”‚
â”‚           â”‚           â”‚           â”‚           â”‚
â”‚           â”‚           ðŸ”„          â”‚           â”‚ t=9s (P3 returns)
â”‚           â”‚          BACK         â”‚           â”‚
â”‚           â”‚           â”‚           â”‚           â”‚
â”‚           â”‚           â”‚â”€â”€ELECTIONâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>
â”‚           â”‚           â”‚           â”‚<â”€â”€â”€â”€OKâ”€â”€â”€â”€â”‚
â”‚           â”‚           â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚           â”‚           â”‚      COORDINATOR      ðŸ‘‘
â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€COORDINATORâ”€â”‚
â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€COORDINATORâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚           â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€COORDINATORâ”€â”‚
â”‚           â”‚           â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€COORDINATORâ”€â”‚
â”‚           â”‚           â”‚           â”‚<COORDINATORâ”‚
â”‚           â”‚           â”‚           â”‚           â”‚
âœ… P5=coord âœ… P5=coord âœ… P5=coord âœ… P5=coord âœ… Leader
```

## âš¡ Scenario 3: Highest Process Returns and Takes Over

```
P1          P2          P3          P4          P5
â”‚           â”‚           â”‚           â”‚           â”‚
â”‚ (P4 is coordinator)    â”‚         ðŸ‘‘â”‚           â”‚
â”‚           â”‚           â”‚           â”‚           â”‚
â”‚           â”‚           â”‚           â”‚           ðŸ”„ t=9s (P5 returns)
â”‚           â”‚           â”‚           â”‚          BACK
â”‚           â”‚           â”‚           â”‚           â”‚
â”‚           â”‚           â”‚           â”‚           â”‚â”€â”€ELECTION (no higher process!)
â”‚           â”‚           â”‚           â”‚           â”‚
â”‚           â”‚           â”‚           â”‚           ðŸ‘‘ (P5 > all)
â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€COORDINATORâ”€â”‚
â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€COORDINATORâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚           â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€COORDINATORâ”€â”‚
â”‚           â”‚           â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€COORDINATORâ”€â”‚
â”‚           â”‚           â”‚           â”‚<COORDINATORâ”‚
â”‚           â”‚           â”‚           â”‚           â”‚
âœ… P5=coord âœ… P5=coord âœ… P5=coord âœ… P5=coord âœ… Leader
```

## ðŸ”€ Scenario 4: Concurrent Elections

```
P1          P2          P3          P4          P5
â”‚           â”‚           â”‚           â”‚           â”‚
â”‚â”€â”€ELECTIONâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> (P1 starts)
â”‚           â”‚â”€â”€ELECTIONâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> (P2 also starts)
â”‚<â”€â”€â”€â”€â”€OKâ”€â”€â”€â”‚           â”‚           â”‚           â”‚
â”‚           â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€OKâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚           â”‚
â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€OKâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚           â”‚
â”‚           â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€OKâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€OKâ”€â”€â”€â”‚
â”‚           â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€OKâ”€â”€â”€â”‚
â”‚           â”‚           â”‚â”€â”€ELECTIONâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>
â”‚           â”‚           â”‚<â”€â”€â”€â”€OKâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚           â”‚           â”‚           â”‚â”€â”€ELECTIONâ”€>
â”‚           â”‚           â”‚           â”‚<â”€â”€â”€â”€OKâ”€â”€â”€â”€â”‚
â”‚           â”‚           â”‚           â”‚           ðŸ‘‘ (P5 wins)
â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€COORDINATORâ”€â”‚
â”‚           â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€COORDINATORâ”€â”‚
â”‚           â”‚           â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€COORDINATORâ”€â”‚
â”‚           â”‚           â”‚           â”‚<COORDINATORâ”‚
â”‚           â”‚           â”‚           â”‚           â”‚
âœ… P5       âœ… P5       âœ… P5       âœ… P5       âœ… Leader
```

## â±ï¸ Scenario 5: Timeout - Coordinator Does Not Announce

```
P1          P2          P3(caiu)    P4          P5
â”‚           â”‚           â”‚           â”‚           â”‚
â”‚â”€â”€ELECTIONâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>
â”‚<â”€â”€â”€â”€â”€OKâ”€â”€â”€â”‚           â”‚           â”‚           â”‚
â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€OKâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚           â”‚
â”‚           â”‚â”€â”€ELECTIONâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>
â”‚           â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€OKâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚           â”‚
â”‚           â”‚           â”‚           â”‚â”€â”€ELECTIONâ”€>
â”‚           â”‚           â”‚           â”‚<â”€â”€â”€â”€OKâ”€â”€â”€â”€â”‚
â”‚           â”‚           â”‚           â”‚           â”‚
â”‚ (waits)   â”‚ (waits)   â”‚           â”‚ (waits)   ðŸ‘‘ P5=leader
â”‚           â”‚           â”‚           â”‚           â”‚ (mas P5 trava!)
â”‚           â”‚           â”‚           â”‚           âŒ (doesn't announce)
â”‚           â”‚           â”‚           â”‚           â”‚
â±ï¸ 4s      â±ï¸ 4s      â”‚           â±ï¸ 4s      â”‚
TIMEOUT!    TIMEOUT!    â”‚           TIMEOUT!    â”‚
â”‚           â”‚           â”‚           â”‚           â”‚
â”‚â”€â”€ELECTIONâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> (restarts)
â”‚<â”€â”€â”€â”€â”€OKâ”€â”€â”€â”‚           â”‚           â”‚           â”‚
â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€OKâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚           â”‚
â”‚           â”‚â”€â”€ELECTIONâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>
â”‚           â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€OKâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚           â”‚
â”‚           â”‚           â”‚           â”‚â”€â”€ELECTIONâ”€>
â”‚           â”‚           â”‚           â”‚<â”€â”€â”€â”€OKâ”€â”€â”€â”€â”‚
â”‚           â”‚           â”‚           â”‚           ðŸ‘‘
â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€COORDINATORâ”€â”‚
â”‚           â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€COORDINATORâ”€â”‚
â”‚           â”‚           â”‚           â”‚<COORDINATORâ”‚
â”‚           â”‚           â”‚           â”‚           â”‚
âœ… P5       âœ… P5       âš ï¸         âœ… P5       âœ… Leader
```

## ðŸ“‹ Legend

```
â”€â”€â”€â”€â”€>      Sent message
<â”€â”€â”€â”€â”€      Reply/Ack
ðŸ‘‘          Process is leader
âš ï¸          Process offline
ðŸ”„          Process returned
ðŸ”          Failure detected
âœ…          Final state OK
âŒ          Failure/Error
â±ï¸          Timeout
ELECTION    TAG_ELEICAO message
OK          TAG_OK message
COORDINATOR TAG_COORDENADOR message
```